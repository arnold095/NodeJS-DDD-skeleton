version: "3.9"

services:
  node_ddd_skeleton:
    build: .
    restart: unless-stopped
    ports: 
      - "3000:3000"
    volumes:
      - ./package.json:/code/package.json
      - ./src:/code/src
    env_file: 
      - ./dev.env
    command: bash -c "npm run start:dev"
  redis_ddd_skeleton:
    image: redis:6.0.10-alpine
    container_name: redis_ddd_skeleton
    logging:
      driver: none
    ports:
      - 6379:6379
  shared_rabbitmq:
    container_name: rabbitmq_ddd_skeleton
    image: 'rabbitmq:3.8.9-management'
    restart: unless-stopped
    ports:
      - 5630:5672
      - 8090:15672
    environment:
      - RABBITMQ_DEFAULT_USER=ddd_skeleton
      - RABBITMQ_DEFAULT_PASS=ddd_sk3l3t0n
